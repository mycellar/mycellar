<div class="container">
  <header class="page-header"><h1>Campagne de réservations en cours</h1></header>
  <div class="row">
    <div class="col-md-2">
      <nav>
        <ul class="nav nav-pills nav-stacked">
          <li ng-repeat="bookingEvent in bookingEvents" ng-class="{active: booking.bookingEvent.id == bookingEvent.id}">
            Du {{bookingEvent.start}} au {{bookingEvent.end}} :<br />
            <a href ng-click="selectBooking(bookingEvent)">{{bookingEvent.name}}</a>
          </li>
        </ul>
      </nav>
    </div>
    <div class="col-md-10">
      <section>
        <error-div errors="errors"></error-div>
        <form ng-if="booking != null">
          <fieldset>
            <legend>{{booking.bookingEvent.name}} du {{booking.bookingEvent.start}} au {{booking.bookingEvent.end}}</legend>
            <div class="table-responsive">
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Vin</th>
                    <th>Format</th>
                    <th>Prix</th>
                    <th>Quantité</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="bookingBottle in booking.bookingEvent.bottles">
                    <td>{{bookingBottle.bottle.wine | wineRenderer}}</td>
                    <td>{{bookingBottle.bottle.format | formatRenderer}}</td>
                    <td>{{bookingBottle.price | currency:"€"}}</td>
                    <td><input class="form-control" id="quantity-{{bookingBottle.id}}" name="quantity-{{bookingBottle.id}}" type="number" ng-model="booking.quantities[booking.bookingEvent.id + '-' + bookingBottle.id]" /></td>
                    <td>{{bookingBottle.price * booking.quantities[booking.bookingEvent.id + '-' + bookingBottle.id] | currency:"€"}}</td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <th colspan="3"></th>
                    <th>Total</th>
                    <th>{{total | currency:"€"}}</th>
                  </tr>
                </tfoot>
              </table>
            </div>
          </fieldset>
          <input type="submit" class="btn btn-primary" value="Réserver" ng-click="save(booking)" />
          <input type="submit" class="btn btn-primary" value="Annuler la réservation" ng-click="delete(booking)" />
        </form>
        <p ng-if="booking == null">Pas de réservation en cours</p>
      </section>
    </div>
  </div>
  <footer>
    <p>2012-2014 Tous droits réservés, MyCellar GPL V3.</p>
  </footer>
</div>
