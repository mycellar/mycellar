<core-toolbar>
  <drawer-button icon="menu"></drawer-button>
  <span flex>Réservations en cours</span>
  <drawer-button right icon="more-vert"></drawer-button>
</core-toolbar>
<core-drawer-panel rightDrawer>
  <nav role="secondary" drawer>
    <core-menu>
      <paper-item ng-repeat="bookingEvent in bookingEvents" label="{{bookingEvent.name}}" ng-click="selectBooking(bookingEvent)"></paper-item>
    </core-menu>
  </nav>
  <div main>
    <form ng-if="booking != null">
      <h2 style="padding: 0 10px;">{{booking.bookingEvent.name}} du {{booking.bookingEvent.start | date}} au {{booking.bookingEvent.end | date}}</h2>
      <paper-item class="threeLines" ng-repeat="bookingBottle in booking.bookingEvent.bottles">
        <div>{{booking.quantities[booking.bookingEvent.id + '-' + bookingBottle.id]}}</div>
        <paper-menu-button select icon="arrow-drop-down" halign="right">
          <paper-item ng-repeat="i in $root.getArray(25) track by $index" label="{{$index}}" ng-click="booking.quantities[booking.bookingEvent.id + '-' + bookingBottle.id] = $index"></paper-item>
        </paper-menu-button>
        <div flex>
          <div class="ellipsis">{{bookingBottle.bottle.wine | wineRenderer}}</div>
          <div><small>{{bookingBottle.bottle.format | formatRenderer}}</small></div>
          <div><small>{{bookingBottle.price | currency:"€"}}</small></div>
        </div>
        <div>{{bookingBottle.price * booking.quantities[booking.bookingEvent.id + '-' + bookingBottle.id] | currency:"€"}}</div>
      </paper-item>
      <div horizontal layout style="padding: 10px; border: solid rgba(0, 0, 0, 0.12); border-width: 1px 0;">
        <div flex>Total</div>
        <div>{{total | currency:"€"}}</div>
      </div>
      <div style="padding: 10px;">
        <paper-button raisedButton label="Réserver" ng-click="save(booking)"></paper-button>
        <paper-button raisedButton label="Annuler la réservation" ng-click="delete(booking)"></paper-button>
      </div>
    </form>
    <p ng-if="booking == null">Pas de réservation en cours</p>
  </div>
</core-drawer-panel>
